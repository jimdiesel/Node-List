var http = require('http'),
  router = require('./choreographer').router();

console.log('help');

router.get('/chatroom/*/messages', function(req, res, room) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('No messages in ' + room + '.\n');
})
.post('/chatroom/*/message', function(req, res, room) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Posted message to ' + room + '.\n');
})
.notFound(function(req, res) {
  res.writeHead(404, {'Content-Type': 'text/plain'});
  res.end('404: This server is just a skeleton for a chat server.\n' +
    'I\'m afraid ' + req.url + ' cannot be found here.\n');
});

http.createServer(router).listen(8124);

console.log('Server running at http://localhost:8124');
